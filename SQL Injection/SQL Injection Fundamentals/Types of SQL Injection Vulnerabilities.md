![image](https://github.com/user-attachments/assets/4649a76f-3a39-4247-81f3-323166281e07)![image](https://github.com/user-attachments/assets/40129c7f-da2b-43be-b9b0-9422546661ce)

### حقن SQL In-Band

حقن SQL In-Band هو أكتر نوع شائع من هجمات SQL Injection.  
الموضوع ببساطة إن الهاكر بيستخدم نفس القناة عشان:  

- **يبعت الهجوم**: يضيف كود SQL خبيث في التطبيق.  
- **يستلم النتائج**: يشوف البيانات اللي طلعها الهجوم من نفس القناة.  

#### ليه النوع ده خطير؟
- ممكن يسرق معلومات حساسة.  
- يعدل أو يمسح بيانات.  
- يسيطر على التطبيق أو حتى السيرفر بالكامل.

![image](https://github.com/user-attachments/assets/e6f3609b-9fd9-4025-bcb6-e62643ac1e76)


### In-Band SQL Injection

الصورة بتوضح فكرة **In-Band SQL Injection** بطريقة بسيطة. خلينا نشرح الموضوع بسيناريو ممتع:

---

#### الشرح:
1. **الهاكر (Attacker):**  
   الشخص اللي بيحاول يخترق النظام. هنا بيكتب كود خبيث (SQL Query) في خانة إدخال زي "اسم المستخدم" أو "البحث" في موقع معين.

2. **التطبيق (Web Application):**  
   الموقع بياخد المدخلات دي ويبعتها للسيرفر (Web Server) اللي بيعمل استعلام على قاعدة البيانات (Database) عشان يجيب البيانات المطلوبة.

3. **قاعدة البيانات (Database):**  
   قاعدة البيانات بتنفذ الكود الخبيث اللي كتبه الهاكر، وترجعله البيانات اللي طلبها (زي أسماء المستخدمين، كلمات السر، أو أي معلومات حساسة).

4. **القناة الواحدة:**  
   الهاكر بيبعت الكود من نفس القناة اللي بيستلم منها النتيجة، يعني كل العملية ماشية في خط واحد (In-Band).

---

#### سيناريو ممتع:
تخيل إنك دخلت مطعم:
- **الهاكر:** الزبون اللي عامل نفسه عادي، بس هو ناوي يخرب.
- **قاعدة البيانات:** المطبخ.
- **الموقع:** الجرسون اللي بياخد الطلبات ويوديها للمطبخ.

الهاكر بدل ما يطلب أكل عادي، بيقول للجرسون:  
"هات لي بيتزا... ومعاها قول للمطبخ يجيبلي كل أسرار المطعم!"  
الجرسون (الموقع) بياخد الطلب ويروح للمطبخ (قاعدة البيانات) من غير ما يراجع، فيرجعله الطلب ومعاه كل أسرار المطعم.

---

#### ملخص:
الهاكر بيستغل ضعف في الموقع، يحقن كود خبيث، وياخد المعلومات اللي عايزها عن طريق نفس القناة اللي بيبعت منها الطلب.

### In-Band SQL Injection Subtypes

**In-band SQL injection** بينقسم لنوعين رئيسيين من طرق الاستغلال. خلينا نشرحهم مع أمثلة بسيطة توضح الفكرة.

---

#### 1. Error-based SQL Injection
- **فكرة النوع ده:**  
  الهاكر بيحقن كود SQL يسبب خطأ في التطبيق. الرسالة اللي بتظهر بتساعده يفهم هيكل قاعدة البيانات أو محتوياتها.

- **مثال على Payload:**
' AND 1=CONVERT(int, (SELECT @@version)); --

- ده ممكن يخلي التطبيق يظهر رسالة خطأ توضح إصدار قاعدة البيانات (SQL Server Version).

---

#### 2. Union-based SQL Injection
- **فكرة النوع ده:**  
الهاكر بيستخدم عامل **UNION** لدمج نتائج استعلامه مع استعلام التطبيق، ويستخرج بيانات مش مسموح له يشوفها.

- **مثال على Payload:**
' UNION SELECT username, password FROM users; --

- ده ممكن يخلي التطبيق يدمج بيانات المستخدمين مع النتيجة الأصلية.

---

#### ملخص:
1. **Error-based SQL Injection:**  
 يعتمد على استغلال رسائل الخطأ لاستخراج معلومات مثل إصدار قاعدة البيانات أو الجداول.

2. **Union-based SQL Injection:**  
 يعتمد على دمج البيانات باستخدام **UNION** لاستخراج بيانات حساسة زي أسماء المستخدمين وكلمات السر.

---

## Blind SQL Injection

حقن SQL العمياء هو نوع من هجمات SQL Injection، المهاجم فيها بيستغل ثغرة في التطبيق الويب اللي مش بيوضح معلومات مباشرة عن قاعدة البيانات أو نتائج استعلام SQL اللي تم حقنه.

في النوع ده من الهجوم، المهاجم بيحقن كود SQL خبيث في حقل الإدخال بتاع التطبيق، لكن التطبيق مش بيرجع أي معلومات مفيدة أو رسائل خطأ للمهاجم في الرد.

المهاجم عادة بيستخدم تقنيات مختلفة علشان يستنتج معلومات عن قاعدة البيانات، زي تأخيرات الوقت أو المنطق البولياني.

المهاجم ممكن يحقن كود SQL يسبب تأخير في التطبيق لمدة معينة حسب نتيجة الاستعلام.

## أنواع Blind SQL Injection

1. **حقن SQL بناءً على المنطق (Boolean-based):**

   في النوع ده، المهاجم بيستغل استجابة التطبيق لشرط منطقي علشان يستنتج معلومات عن قاعدة البيانات. المهاجم بيرسل استعلام SQL خبيث للتطبيق وبيشوف الرد بناءً على إذا كان الاستعلام اشتغل بنجاح أو فشل.

2. **حقن SQL بناءً على الوقت (Time-based):**

   في النوع ده، المهاجم بيستغل وقت استجابة التطبيق علشان يستنتج معلومات عن قاعدة البيانات. المهاجم بيرسل استعلام SQL خبيث للتطبيق وبيحسب الوقت اللي بياخده التطبيق عشان يرد.


## Out-of-Band SQL Injection

- ده نوع نادر من هجمات SQL Injection، بيستخدمه المهاجم عشان يستغل ثغرة في تطبيق ويب ويطلع بيانات من قاعدة البيانات عن طريق قناة تانية غير التطبيق نفسه.  
- على عكس in-band SQL Injection، المهاجم هنا مش محتاج يشوف النتيجة بتاعت الاستعلام اللي حقنه في استجابة التطبيق.  
- المهاجم ممكن يستخدم طرق زي إرسال طلبات HTTP لسيرفر خارجي بيتحكم فيه، أو استخدام استعلامات DNS عشان يطلع البيانات.


![image](https://github.com/user-attachments/assets/6d4ec68b-d05f-4979-8f88-a2e85b4ac1bf)

## شرح الصورة: Out-of-Band SQL Injection

### ملخص الصورة:
الصورة بتشرح هجوم Out-of-Band SQL Injection واللي بيتم من خلال قناتين مختلفتين للتواصل:
1. **القناة الأولى:** بيبعت المهاجم فيها Payload (أوامر SQL) لتطبيق الويب.
2. **القناة التانية:** بيتم استرجاع البيانات بطريقة غير مباشرة، زي مراقبة طلبات HTTP أو DNS اللي التطبيق بيبعتها لخدمة المهاجم.

### خطوات الهجوم في الصورة:
1. **المهاجم:** بيبعت SQL Payload لتطبيق الويب عبر الإنترنت.
2. **تطبيق الويب:** بينفذ الاستعلام على قاعدة البيانات.
3. **قاعدة البيانات:** بتبعت البيانات المطلوبة لقناة بديلة زي HTTP أو DNS، والمهاجم بيراقب القناة دي عشان يحصل على البيانات.

---

### سيناريو بسيط للتوضيح:
تخيل إن في بنك بيستخدم تطبيق ويب عشان العملاء يشوفوا حساباتهم. المهاجم بيستغل ثغرة في التطبيق ويبعت كود خبيث (SQL Payload). التطبيق بينفذ الكود ويبعته في صورة طلب DNS لسيرفر خارجي المهاجم بيتحكم فيه. المهاجم بعد كده يقدر يشوف البيانات اللي طلبها من خلال مراقبة الطلبات اللي جاية لسيرفره.

**ده شبه إنك تطلب من حد يوصل رسالة لشخص معين بس الرسالة الحقيقية بتكون فيها معلومات مهمة بتتسرب لعنوان خارجي.**

### ملاحظات:
- الطريقة دي بتكون فعّالة لما المهاجم مش محتاج يشوف النتيجة مباشرة في التطبيق.
- لازم نأمن التطبيقات عشان نقلل فرص الهجمات بالشكل ده.

